<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>BeAPI-API-Framework</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <img src="beapi_logo2.png" style="width:auto;height:auto;padding:0px;">
        <p></p>

        <ul>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/index.html"><strong>About</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/installation.html"><strong>Installation</strong></a></li>
            <ul>
            <li><a href="installation.html#req">Requirements</a></li>
            <li><a href="installation.html#conf">Configuration</a></li>
            <li><a href="installation.html#samp">Sample Project</a></li>
            </ul>
          </li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/model.html"><strong>The Model</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/iostate.html"><strong>IO State</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/usage.html"><strong>API Usage</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/batch.html"><strong>Batch Processing</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/chain.html"><strong>Api Chaining</strong></a></li>
          <li><a href="http://orubel.github.io/Beapi-API-Framework/troubleshooting.html"><strong>Troubleshooting</strong></a></li>
          <li>&nbsp</li>

        </ul>
      </header>
      <section>
        <h3><a id="req" class="anchor" href="#req" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h3>

        <p>The <b>BeAPI&#8482; API Framework</b> has the following project requirements:</p>
        <ul>
          <li><b>Grails 3.3.0</b> (or higher)</li>
          <li><b>Java 1.8</b> (or higher)</li>
        </ul>

        <p><b>NOTE:</b> You may notice in the sample project that several rest plugins and web/mvc plugins have been left out from the dependencies. This is deliberate; due to our API abstraction layer, they can cause confusion and unnecessary slowness in the application.</p>

<h3><a id="conf" class="anchor" href="#conf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h3>

<p>In your <b>build.gradle</b> file, you will need to add the following:</p>
<pre><code>repositories {
repositories {
  ...
  maven { url "http://dl.bintray.com/nosegrind/plugins" }
}
dependencies {
  ...
  compile "org.grails.plugins:api-framework:0.9.4"
}
}</code></pre>

<p>You will also need the following dependencies:</p>
<pre><code>
  dependencies {
    /**
     * API Block
     */
    compile 'org.grails.plugins:api-framework:0.9.3'
    //compile group: 'org.scribe', name: 'scribe', version: '1.3.7'

    /**
     * MVC Support Block
     */
    provided 'org.grails.plugins:cache:4.0.0'
    compile "org.grails.plugins:async"
    provided "org.grails:grails-logging"
    provided "org.grails:grails-plugin-i18n"
    provided "org.grails:grails-plugin-services"
    provided "org.grails:grails-plugin-interceptors"
    provided 'org.grails.plugins:converters:3.3.1'
    provided "org.grails.plugins:events"
    provided('org.grails:grails-web')

    /**
     * Application Server
     */
    runtime "org.apache.tomcat:tomcat-jdbc"

    /**
     * Parallelization Block
     */
    provided 'org.codehaus.gpars:gpars:1.2.1', {
        exclude group:'org.multiverse', module:'multiverse-core'
        exclude group:'org.codehaus.groovy', module: 'groovy-all'
    }
    provided("org.codehaus.groovy:groovy-ant:${groovyVersion}")

    /**
     * SpringBoot Block
     */
    compile "org.springframework.boot:spring-boot-starter-logging"
    provided 'org.springframework.boot:spring-boot-starter-tomcat'
    compile "org.springframework.boot:spring-boot-autoconfigure"


    /**
     * DB Block
     */
    provided "org.grails.plugins:hibernate5"
    provided "org.hibernate:hibernate-core:5.1.5.Final"
    provided "org.hibernate:hibernate-ehcache:5.1.5.Final"
    //provided 'org.grails.plugins:hibernate:4.3.10.6'
    //provided "org.hibernate:hibernate-ehcache"
    runtime 'mysql:mysql-connector-java:5.1.29'

    /**
     * Security block
     */
    provided('org.grails.plugins:spring-security-core:3.2.0.M1')
    compile('org.grails.plugins:spring-security-rest:2.0.0.M2')
    // required by spring-security-rest for loginController/logoutController
    compile "org.grails:grails-plugin-rest"
    compile('org.grails.plugins:spring-security-rest-gorm:2.0.0.M2'){
        exclude module: 'org.grails.plugins:spring-security-rest:2.0.0.M2'
    }

    /**
     * Test Block
     */
    testCompile "org.grails.plugins:geb"
    testCompile "org.grails:grails-plugin-testing"
    testCompile "org.grails:grails-gorm-testing-support:1.1.4"
    testCompile "org.grails:grails-web-testing-support:1.1.4"
    testRuntime "net.sourceforge.htmlunit:htmlunit:2.18"
    testCompile('org.codehaus.groovy.modules.http-builder:http-builder:0.7.1') {
        exclude module: "commons-logging"
        exclude module: "xml-apis"
        exclude module: "groovy"
    }
    testCompile "org.grails:grails-datastore-rest-client:4.0.4.RELEASE"
    console "org.grails:grails-console"
  }
</code></pre>
</br>
<p>Then in your <b>grails-app/conf/application.yml</b> file, you will need to modify the following line under each of your environments (ie development/production/etc):</p>
<pre><code>iostate:
    preloadDir: '/home/yourUserName/.iostate'"</code></pre>
  </br>
  <p>You will also need to add and configure this final snippet in your 'application.yml' file: </p>

<pre><code>---
apitoolkit:
    apiName: 'api'
    attempts: 5
    roles: ['ROLE_USER','ROLE_ROOT','ROLE_ADMIN','ROLE_ARCH']
    profilerRoles: ['ROLE_ROOT','ROLE_ADMIN','ROLE_ARCH']
    apichain:
        limit: 3
    rest:
        postcrement: false
    chaining:
        enabled: true
    batching:
        enabled: true
    encoding: 'UTF-8'
    throttle:
        rateLimit: {'ROLE_USER':1000}
        dataLimit: {'ROLE_USER':1000000}
        # in seconds : 3600 = 60 minutes
        expires: 3600
    admin:
        roles: ['ROLE_ROOT','ROLE_ADMIN','ROLE_ARCH']
    serverType: 'master'
    webhook:
        services: ['iostate']
    corsConfig:
        includeEnvironments: ['development','test']
        excludeEnvironments: ['production']
        allowedOrigins: ['localhost:3000']
</code></pre>
<h3><a id="samp" class="anchor" href="#samp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sample Project</h3>
</br>
<p>Finally, once you have generated your controllers and domains, you will want to generate your IO state to get your API's configured by running the following command</p>
<pre><code>./gradlew generateIostate
</code></pre>
<p>If you are having issues installing or using the BeAPI API Framework, you can always look at or copy from our example project at the link below:</p>

          <p><a href="https://github.com/orubel/api-framework-example">https://github.com/orubel/api-framework-example</a></p>

</section>
      <footer>
        <p class="view"><a href="https://github.com/orubel/Boomstick-API-Framework">View the Project on GitHub <small>orubel/Beapi-API-Framework</small></a></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
